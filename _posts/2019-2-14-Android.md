---
layout: post
title: 安卓开发各种问题汇总
---

# 概览

安卓开发各种问题汇总

## 破解、反编译

### 查看Manifest 
可以使用apktool 

{% highlight Android %}
apktool d /Users/zhangruquan/Downloads/com.sina.weibo3829.apk
{% endhighlight %}


## 适配问题

#### 全面屏的适配

从小米MIX 1发布以来，越来越多所谓“全面屏”手机发布，如三星S8，小米MIX2，VIVO X20，Google Pixel2等等，全面屏手机大致思路都是压缩额头与下巴，屏幕比例从传统的16：9变为18：9，提高屏占比以及屏幕内的虚拟导航键。如果不适配则上下会有黑边。适配的两种方法如下：

第一种方法targetSdkVersion==24（Android7.0）及以上默认支持了分屏模式，即Manifest文件中配置Activity的android:resizeableActivity默认属性为true
{% highlight Android %}
android:resizeableActivity="true"
{% endhighlight %}

采用此方法的有腾讯视频、腾讯新闻

第二种方法 在应用配置文件AndroidManifest.xml中显式声明支持的最大屏幕高宽比（maximum aspect ratio）。其中 ratio_float 为高宽比：
　　传统屏幕：ratio_float = 16/9 = 1.778 ；
　　三星S8屏幕：ratio_float = 18.5/9 = 2.056。
　　红米6pro屏幕：ratio_float = 19/9 = 2.111。
　　鉴于目前全面屏屏幕比例，将ratio_float设置为2.2即可适配一众全面屏手机。

{% highlight Android %}
<meta-data
            android:name="android.max_aspect"
            android:value="2.2"/>

{% endhighlight %}

采用此方法的有 网易新闻
{% highlight Android %}
<meta-data android:name="android.max_aspect" android:value="2.4"/>
{% endhighlight %}
叽里呱啦、新浪微博
{% highlight Android %}
<meta-data android:name="android.max_aspect" android:value="2.5"/>
{% endhighlight %}{% endhighlight %}

#### 图标兼容 Android8.0 及旧版本

[drawable和mipmap的区别](https://developer.android.com/guide/topics/resources/providing-resources)

drawable ：
位图文件（.png、.9.png、.jpg、.gif）或编译为以下可绘制对象资源子类型的 XML 文件：

位图文件
九宫格（可调整大小的位图）
状态列表
形状
动画可绘制对象
其他可绘制对象

mipmap ： 适用于不同启动器图标密度的可绘制对象文件

##### 启动图标到底要放到哪里？

要放到哪里取决于产品经理，现在用androidstudio 创建默认放在mipmap，而且安卓8.0以后app图标的圆角还是方角可以交给系统来决定。如果你放在mipmap就要坐Android8.0的适配，把图标分为前后两个图标，后面的图标为背景图标，前面为主logo。这样在Android 8.0上如果交给系统来决定app图标，那么有可能为圆形，也有可能为圆角的正方形。

不过如果产品经理要求无论在什么版本系统上都要圆角的正方形，那么你就要舍弃 mipmap。我们来看看各个APP的实现。

新浪微博：android:icon="@drawable/logo" 

腾讯新闻：android:icon="@mipmap/icon"

腾讯视频：android:icon="@drawable/icon"

网易新闻：android:icon="@drawable/icon"

叽里呱啦：android:icon="@drawable/ic_launcher"




